[list_tm_darkvalley]
val_temp_start_quest
val_come_to_freedom_blokpost
val_come_to_freedom_base
val_reply_to_sos
val_come_to_comendant
val_eliminate_smart_6_4
val_come_back_comendant_to_revard
val_go_to_trader
val_deliver_ammo
val_go_to_freedom_leader
val_pursuit_comendant
val_help_freedom
val_take_pda
val_deliver_pda
val_bring_to_fang
val_capture_smart_7_8
val_capture_smart_4_0
val_capture_smart_1_1
val_destroy_boar_guard_9_2
val_kill_boars
val_check_blockpost
val_find_pda
val_bandit_spy
val_bandit_spy_kill
val_bandit_spy_return
val_bandit_pda_return_freedom_leader
val_night_bloodsucker
val_night_bloodsucker_reward
val_join_freedom

val_recover_item_1
val_recover_item_2
val_recover_item_3

val_bring_item_1
val_bring_item_2
val_bring_item_3
val_bring_item_4
val_bring_item_5
val_bring_item_6

;-----------------------------------------------------
;------------------ Storyline Quests -----------------
;-----------------------------------------------------

; Отправиться за Клыком в Тёмную долину
[val_temp_start_quest]
type = storyline
task_type = storyline
icon = ui_mt_image_attack_tower
target_cond = true
prior = 10
name = gar_story_go_to_freedom_name
text = gar_story_go_to_freedom_text
on_complete = %+val_temp_start_quest_done%
condlist_0 = {+val_temp_start_quest_complete} complete
target_story_ids = 1199

; Поговорить со «свободовцами» на блокпосту
[val_come_to_freedom_blokpost]
type = storyline
task_type = storyline
icon = ui_mt_image_attack_tower
target_cond = true
prior = 10
name = val_come_to_freedom_blokpost_name
text = val_come_to_freedom_blokpost_text
on_complete = %+val_come_to_freedom_blockpost_done%
condlist_0 = {+val_talked_to_blockpost_leader_complete} complete
condlist_1 = {+val_blockpost_ns_dead} fail, {+val_come_to_freedom_base_complete} fail, {=gulag_enemy_actor(val_smart_terrain_5_7)} fail
target_story_ids = 1100
community_relation_delta_fail = -5000

; Найти базу «Свободы»
[val_come_to_freedom_base]
type = storyline
task_type = storyline
icon = ui_mt_image_attack_tower
target_cond = true
prior = 10
name = val_come_to_freedom_base_name
text = val_come_to_freedom_base_text
on_complete = %+val_come_to_freedom_base_done%
condlist_0 = {+val_talked_to_blockpost_leader_complete +val_come_to_freedom_base_complete} complete
condlist_1 = {-val_talked_to_blockpost_leader_complete} fail
target_story_ids = 1101

; Ответить на сигнал SOS
[val_reply_to_sos]
type = storyline
task_type = additional
icon = ui_mt_image_attack_tower
target_cond = true
prior = 15
name = val_reply_to_sos_name
text = val_reply_to_sos_text
on_complete = %+val_reply_to_sos_done%
condlist_0 = {+val_reply_to_sos_complete} complete
condlist_1 = {+val_come_to_freedom_base_complete} fail
reward_money = 200
target_story_ids = 1102

; Поговорить с комендантом
[val_come_to_comendant]
type = storyline
task_type = storyline
icon = ui_mt_image_attack_tower
target_cond = true
prior = 10
name = val_come_to_comendant_name
text = val_come_to_comendant_text
on_complete = %+val_come_to_comendant_done%
condlist_0 = {+val_come_to_comendant_complete} complete
target_story_ids = 1103

; Убить пси-собаку
[val_eliminate_smart_6_4]
type = eliminate_smart
task_type = storyline
icon = ui_mt_image_attack_tower
target_cond = {-val_kill_flesh_done =target_smart_name(val_smart_terrain_6_4)} true
prior = 12
name = val_kill_flesh_name
text = val_kill_flesh_text
on_complete = %+val_kill_flesh_done%
on_reversed = %+val_kill_flesh_done%
reward_money = 500
target_story_ids = 1109
play_regard = nil
auto_faction = true

; Получить указания от коменданта
[val_come_back_comendant_to_revard]
type = storyline
task_type = storyline
icon = ui_mt_image_attack_tower
target_cond = true
prior = 10
name = val_come_back_comendant_to_revard_name
text = val_come_back_comendant_to_revard_text
on_complete = %+val_come_back_comendant_to_revard_done%
condlist_0 = {+val_come_back_comendant_to_revard} complete
target_story_ids = 1110

; Получить боеприпасы у Ашота
[val_go_to_trader]
type = storyline
task_type = storyline
icon = ui_mt_image_attack_tower
target_cond = true
prior = 10
name = val_go_to_trader_name
text = val_go_to_trader_text
on_complete = %+val_go_to_trader_done%
condlist_0 = {+val_go_to_trader_complete} complete
target_story_ids = 1104

; Доставить боеприпасы на форпост
[val_deliver_ammo]
type = storyline
task_type = storyline
icon = ui_mt_image_attack_tower
target_cond = true
prior = 10
name = val_deliver_ammo_name
text = val_deliver_ammo_text
on_reversed = %+val_deliver_ammo_done%
condlist_0 = {+val_deliver_ammo_complete} reversed
target_story_ids = 1105

; Узнать, что произошло на блокпосте
[val_check_blockpost]
type = storyline
task_type = storyline
icon = ui_mt_image_attack_tower
target_cond = true
prior = 10
name = val_check_blockpost_name
text = val_check_blockpost_text
on_complete = %+val_check_blockpost_done%
condlist_0 = {+val_check_blockpost_complete} complete
target_story_ids = 1118

; Найти активный КПК
[val_find_pda]
type = storyline
task_type = storyline
icon = ui_mt_image_attack_tower
target_cond = true
prior = 10
name = val_find_pda_name
text = val_find_pda_text
on_complete = %+val_find_pda_done%
condlist_0 = {+val_find_pda_complete} complete
target_story_ids = 1119

; Принести КПК Чехову
[val_go_to_freedom_leader]
type = storyline
task_type = storyline
icon = ui_mt_image_attack_tower
target_cond = true
prior = 10
name = val_go_to_freedom_leader_name
text = val_go_to_freedom_leader_text
on_complete = %+val_go_to_freedom_leader_done%
condlist_0 = {+val_go_to_freedom_leader_complete} complete
target_story_ids = 1106

; Найти коменданта Щукина
[val_pursuit_comendant]
type = storyline
task_type = storyline
icon = ui_mt_image_attack_tower
target_cond = true
prior = 10
name = val_pursuit_comendant_name
text = val_pursuit_comendant_text
on_complete = %+val_pursuit_comendant_done%
condlist_0 = {+val_pursuit_comendant_complete} complete
target_story_ids = 1107

; Помочь «Свободе» уничтожить наёмников
[val_help_freedom]
type = eliminate_smart
task_type = storyline
auto_name = false
icon = ui_mt_image_attack_tower
target_cond = {=target_smart_name(val_smart_terrain_4_0) -val_help_freedom_done} true
prior = 10
name = val_help_freedom_name
text = val_help_freedom_text
on_complete = %+val_help_freedom_done%
on_reversed = %+val_help_freedom_done%
reward_money = 3000
target_story_ids = 1108
play_regard = nil
auto_faction = true

; Взять КПК коменданта Щукина
[val_take_pda]
type = storyline
task_type = storyline
icon = ui_mt_image_attack_tower
target_cond = true
prior = 10
name = val_take_pda_name
text = val_take_pda_text
on_complete = %+val_take_pda_done%
condlist_0 = {+val_take_pda_complete} complete
target_story_ids = 1111

; Доставить КПК коменданта Чехову
[val_deliver_pda]
type = storyline
task_type = storyline
icon = ui_mt_image_attack_tower
target_cond = true
prior = 10
name = val_deliver_pda_name
text = val_deliver_pda_text
on_complete = %+val_deliver_pda_done%
condlist_0 = {+val_deliver_pda_complete} complete
target_story_ids = 1112

; Следовать за сигналом КПК Клыка
[val_bring_to_fang]
type = storyline
task_type = storyline
icon = ui_mt_image_attack_tower
target_cond = true
prior = 10
name = val_bring_to_fang_name
text = val_bring_to_fang_text
on_complete = %+val_bring_to_fang_done%
condlist_0 = {+val_bring_to_fang_complete} complete
target_story_ids = 1113

;-----------------------------------------------------
;------------------ Secondary Quests -----------------
;-----------------------------------------------------

; Захватить антенну на болоте
[val_capture_smart_7_8]
type = capture_smart
task_type = additional
icon = ui_mt_image_attack_tower
target_cond = {+val_deliver_pda_done -val_strike_antenna_two_captured =target_smart_name(val_smart_terrain_7_8)} true
prior = 20
name = val_strike_antenna_name
text = val_strike_antenna_text
play_regard = nil
wait_time = -1
auto_faction = false

; Захватить антенну на ферме
[val_capture_smart_4_0]
type = capture_smart
task_type = additional
target_cond = {+val_deliver_pda_done -val_strike_antenna_two_captured =target_smart_name(val_smart_terrain_4_0)} true
prior = 20
icon = ui_mt_image_attack_tower
name = val_strike_antenna_two_name
text = val_strike_antenna_two_text
play_regard = nil
wait_time = -1
auto_faction = false

; Уничтожить наёмников
[val_capture_smart_1_1]
type = eliminate_smart
task_type = additional
icon = ui_mt_image_attack_tower
target_cond = {+val_strike_antenna_two_captured -val_destroy_killer_base_done =target_smart_name(val_smart_terrain_1_2)} true
prior = 100
name = val_destroy_killer_base_name
text = val_destroy_killer_base_text
on_complete = %+val_destroy_killer_base_done +val_strike_antenna_done%
on_reversed = %+val_killer_base_is_no_more%
community_relation_delta_complete = 700
reward_money = 1000
play_regard = nil
auto_faction = true

;Additional quests

; Уничтожить логово кабанов
[val_destroy_boar_guard_9_2]
type = storyline
task_type = additional
icon = ui_mt_image_attack_tower
target_cond = true
prior = 11
name = val_destroy_boar_guard_9_2_name
text = val_destroy_boar_guard_9_2_text
condlist_0 = {+val_destroy_boar_guard_9_2_done} complete
target_story_ids = 1117
auto_name = false
auto_faction = true
community_relation_delta_complete = 50

; Вернуться за наградой
[val_kill_boars]
type = storyline
task_type = additional
prior = 11
icon = ui_mt_image_attack_tower
;spot = mar_defend_tower_location
target_cond = true
name = val_kill_boars_name
text = val_kill_boars_text
condlist_0 = {+val_destroy_boar_guard_9_2_complete} complete
target_story_ids = 1129
auto_name = false
auto_faction = true

; Устранить предполагаемую опасность на заправке
[val_bandit_spy]
type = storyline
task_type = additional
icon = ui_mt_image_attack_tower
target_cond = true
prior = 11
name = val_bandit_spy_name
text = val_bandit_spy_text
condlist_0 = {+val_bandit_spy_die} complete
target_story_ids = 1121

; Обыскать тела бандитов
[val_bandit_spy_kill]
type = storyline
task_type = additional
icon = ui_mt_image_attack_tower
target_cond = true
condlist_0 = {+val_bandit_spy_found} complete
prior = 11
name = st_val_bandit_spy_kill_name
text = st_val_bandit_spy_kill_text
target_story_ids = 1121

; Вернуться за наградой
[val_bandit_spy_return]
type = storyline
task_type = additional
icon = ui_mt_image_attack_tower
target_cond = true
condlist_0 = {+val_bandit_spy_done} complete
prior = 11
name = st_val_bandit_spy_return_name
text = st_val_bandit_spy_return_text
target_story_ids = 1125

; Отнести КПК бандита Чехову
[val_bandit_pda_return_freedom_leader]
type = storyline
task_type = additional
icon = ui_mt_image_attack_tower
target_cond = true
condlist_0 = {+val_bandit_pda_return_freedom_leader_complete} complete
prior = 11
name = st_val_bandit_pda_return_freedom_leader_name
text = st_val_bandit_pda_return_freedom_leader_text
target_story_ids = 1106
community_relation_delta_complete = 50

; Найти друга техника
[val_night_bloodsucker]
type = storyline
task_type = additional
icon = ui_mt_image_attack_tower
target_cond = true
prior = 11
name = val_night_bloodsucker_name
text = val_night_bloodsucker_text
condlist_0 = {+val_night_bloodsucker_complete} complete
condlist_1 = {+val_night_bloodsucker_fail} fail
target_story_ids = 1122

; Принести флешку технику
[val_night_bloodsucker_reward]
type = storyline
task_type = additional
icon = ui_mt_image_attack_tower
target_cond = true
prior = 11
name = val_night_bloodsucker_reward_name
text = val_night_bloodsucker_reward_text
condlist_0 = {+val_night_bloodsucker_reward_complete} complete
reward_money = 2000
target_story_ids = 1123
immediate_reward = true
community_relation_delta_complete = 50

; Вступить в «Свободу»
[val_join_freedom]
type = storyline
task_type = additional
icon = ui_mt_image_attack_tower
target_cond = true
prior = 17
name = val_join_freedom_name
text = val_join_freedom_text
on_complete = %+val_join_freedom_done%
condlist_0 = {=is_actor_in_freedom} complete
condlist_1 = {=is_actor_in_dolg} fail
target_story_ids = 1124

;Recover Items

[val_recover_item_1]   ;Вернуть 8-кратный прицел
type = recover_item
task_type = additional
name = val_recover_item_1_name
text = val_recover_item_1_text
target_npc_or_box_name = val_recover_item_1_spawn
distanse = 100
prior = 2
faction = freedom
target_cond = {=actor_on_level(darkvalley) -val_recover_item_1_done} true, false
on_init = %+val_recover_item_1_done%
requested_items = val_quest_scope_x8
community_relation_delta_fail=-50
community_relation_delta_complete =+50
reward_money = 2000
auto_faction = true
immediate_reward = true

[val_recover_item_2]   ;Вернуть флешку с фильмом
type = recover_item
task_type = additional
name = val_recover_item_2_name
text = val_recover_item_2_text
target_npc_or_box_name = val_recover_item_2_spawn
distanse = 100
prior = 2
faction = freedom
target_cond = {=actor_on_level(darkvalley) -val_recover_item_2_done} true, false
on_init = %+val_recover_item_2_done%
requested_items = val_quest_flash_movies
community_relation_delta_fail=-50
community_relation_delta_complete =+50
reward_money = 1500
auto_faction = true
immediate_reward = true

[val_recover_item_3]   ;Вернуть гитару Сереги
type = recover_item
task_type = additional
name = val_recover_item_3_name
text = val_recover_item_3_text
target_npc_or_box_name = val_recover_item_3_spawn
distanse = 100
prior = 2
faction = freedom
target_cond = {=actor_on_level(darkvalley) -val_recover_item_3_done} true, false
on_init = %+val_recover_item_3_done%
requested_items = val_quest_guitar_serg
community_relation_delta_fail=-50
community_relation_delta_complete =+50
reward_money = 500
auto_faction = true
immediate_reward = true

;Bring Items

[val_bring_item_1]
auto_name = false
type = bring_item
task_type = additional
name = val_bring_item_1_name
text = val_bring_item_1_text
target_cond = {~20 =actor_on_level(darkvalley)} true
prior = 2
faction = freedom
requested_items = grenade_f1, grenade_f1, grenade_f1
community_relation_delta_fail=-50
community_relation_delta_complete =+50
reward_money = {~50} 1000, {~50} 1500, 500
auto_faction = true
immediate_reward = true

[val_bring_item_2]
auto_name = false
type = bring_item
task_type = additional
name = val_bring_item_2_name
text = val_bring_item_2_text
target_cond = {~20 =actor_on_level(darkvalley)} true
prior = 2
faction = freedom
requested_items = medkit_scientic, medkit_scientic
community_relation_delta_fail=-50
community_relation_delta_complete =+50
reward_money = {~50} 1000, {~50} 1500, 500
auto_faction = true
immediate_reward = true

[val_bring_item_3]
auto_name = false
type = bring_item
task_type = additional
name = val_bring_item_3_name
text = val_bring_item_3_text
target_cond = {~20 =actor_on_level(darkvalley)} true
prior = 2
faction = freedom
requested_items = wpn_g36, ammo_5.56x45_ss190, ammo_5.56x45_ss190
community_relation_delta_fail=-50
community_relation_delta_complete =+50
reward_money = {~50} 1000, {~50} 1500, 500
auto_faction = true
immediate_reward = true

[val_bring_item_4]
auto_name = false
type = bring_item
task_type = additional
name = val_bring_item_4_name
text = val_bring_item_4_text
target_cond = {~20 =actor_on_level(darkvalley)} true
prior = 2
faction = freedom
requested_items = wpn_vintorez
community_relation_delta_fail=-50
community_relation_delta_complete =+50
reward_money = {~50} 1000, {~50} 1500, 500
auto_faction = true
immediate_reward = true

[val_bring_item_5]
auto_name = false
type = bring_item
task_type = additional
name = val_bring_item_5_name
text = val_bring_item_5_text
target_cond = {~20 =actor_on_level(darkvalley)} true
prior = 2
faction = freedom
requested_items = ammo_5.56x45_ap, ammo_5.56x45_ap, ammo_5.56x45_ap
community_relation_delta_fail=-50
community_relation_delta_complete =+50
reward_money = {~50} 1000, {~50} 1500, 500
auto_faction = true
immediate_reward = true

[val_bring_item_6]
auto_name = false
type = bring_item
task_type = additional
name = val_bring_item_6_name
text = val_bring_item_6_text
target_cond = {~20 =actor_on_level(darkvalley)} true
prior = 2
faction = freedom
requested_items = wpn_spas12, ammo_12x76_dart, ammo_12x76_dart
community_relation_delta_fail=-50
community_relation_delta_complete =+50
reward_money = {~50} 1000, {~50} 1500, 500
auto_faction = true
immediate_reward = true