[list_tm_garbadge]
gar_story_find_diggers
gar_story_search_digger_bodies
gar_story_chase_digger
gar_story_kill_dogs
gar_story_go_to_freedom
gar_story_chase_pda_signal
gar_story_chase_pda_signal_cellar
gar_story_get_pda

gar_quest_killer_pseudodogs
gar_kill_pseudodogs
gar_quest_redemption

gar_quest_get_old_pda
gar_quest_get_old_pda_box
gar_quest_bring_old_pda
gar_quest_bring_money
gar_quest_get_weapons
gar_quest_destroy_ambush
gar_quest_get_traitor_pda
gar_quest_speak_with_quester
gar_quest_meet_with_digger_fighters
gar_quest_liberate_conc_camp
gar_quest_captive_reward

gar_quest_kill_digger_traitor
gar_quest_kill_smuggler
gar_quest_destroy_flea_market
gar_quest_bandit_reward
gar_quest_more_reward
gar_quest_bandit_secret

gar_recover_item_1
gar_recover_item_2
gar_recover_item_3
gar_recover_item_4
gar_recover_item_5

gar_bring_item_1
gar_bring_item_2
gar_bring_item_3
gar_bring_item_4
gar_bring_item_5
gar_bring_item_6

;-----------------------------------------------------
;------------------ Storyline Quests -----------------
;-----------------------------------------------------

; Получить у диггеров информацию о Клыке
[gar_story_find_diggers]
type = storyline
task_type = storyline
icon = ui_mt_image_attack_tower
target_cond = true
prior = 2
name = gar_story_find_diggers_name
text = gar_story_find_diggers_text
condlist_0 = {+gar_story_reached_dead_diggers_camp} reversed
target_story_ids = 702
auto_name = false

; Обыскать тело диггера
[gar_story_search_digger_bodies]
type = storyline
task_type = storyline
icon = ui_mt_image_attack_tower
target_cond = true
prior = 3
name = gar_story_search_digger_bodies_name
text = gar_story_search_digger_bodies_text
condlist_0 = {+gar_story_searched_digger_body} complete
target_story_ids = 701
auto_name = false

; Получить информацию от диггера-посланника
[gar_story_chase_digger]
type = storyline
task_type = storyline
icon = ui_mt_image_attack_tower
target_cond = true
prior = 3
name = gar_story_chase_digger_name
text = gar_story_chase_digger_text
condlist_0 = {+gar_story_got_info_from_digger} complete
target_story_ids = logic@work1, gar_smart_terrain_8_5
auto_name = false

; Убить слепых псов
[gar_story_kill_dogs]
type = defend_smart_delay
task_type = storyline
icon = ui_mt_image_attack_tower
target_cond = {-gar_story_messenger_dogs_dead -gar_story_got_info_from_digger =target_smart_name(gar_smart_terrain_8_5)} true
prior = 15
name = gar_story_kill_dogs_name
text = gar_story_kill_dogs_text
on_complete = %+gar_story_messenger_dogs_dead%
on_reversed = %-gar_story_messenger_dogs_dead%
condlist_0 = {+gar_story_digger_killed_or_hostile} reversed
play_regard = nil
wait_time = 0
auto_name = false
community_relation_delta_complete = 50

; Отправиться за Клыком в Тёмную долину
[gar_story_go_to_freedom]
type = storyline
task_type = storyline
icon = ui_mt_image_attack_tower
target_cond = true
prior = 2
name = gar_story_go_to_freedom_name
text = gar_story_go_to_freedom_text
condlist_0 = {+val_temp_start_quest_complete} complete
target_story_ids = 1199
auto_name = false

; Догнать Клыка
[gar_story_chase_pda_signal]
type = storyline
task_type = storyline
icon = ui_mt_image_attack_tower
target_cond = true
prior = 2
name = gar_story_chase_pda_signal_name
text = gar_story_chase_pda_signal_text
condlist_0 = {+gar_story_came_to_ambush_door} reversed
target_story_ids = 706
auto_name = false

; Найти Клыка
[gar_story_chase_pda_signal_cellar]
type = storyline
task_type = storyline
icon = ui_mt_image_attack_tower
target_cond = true
prior = 2
name = gar_story_chase_pda_signal_cellar_name
text = gar_story_chase_pda_signal_cellar_text
condlist_0 = {+gar_story_cannot_find_fang} reversed
target_story_ids = 703
auto_name = false

; Поднять КПК Клыка
[gar_story_get_pda]
type = storyline
task_type = storyline
icon = ui_mt_image_attack_tower
spot = gar_story_get_pda_location
target_cond = true
prior = 3
name = gar_story_get_pda_name
text = gar_story_get_pda_text
condlist_0 = {+gar_story_got_fang_pda} complete
target_story_ids = 703
auto_name = false


;-----------------------------------------------------
;------------------ Secondary Quests -----------------
;-----------------------------------------------------

; Убить Ночных Охотников
[gar_quest_killer_pseudodogs]
type = storyline
task_type = additional
prior = 10
icon = ui_mt_image_attack_tower
;spot = mar_defend_tower_location
target_cond = true
name = gar_quest_killer_pseudodogs_name
text = gar_quest_killer_pseudodogs_text
condlist_0 = {+gar_quest_killer_pseudodogs_done} complete
condlist_1 = {+gar_flea_market_fixer_dead} fail
target_story_ids = 708
auto_name = false
auto_faction = true
community_relation_delta_complete = 50

; Вернуться за наградой
[gar_kill_pseudodogs]
type = storyline
task_type = additional
prior = 11
icon = ui_mt_image_attack_tower
;spot = mar_defend_tower_location
target_cond = true
name = st_gar_kill_pseudodogs_name
text = st_gar_kill_pseudodogs_text
condlist_0 = {+gar_kill_pseudodogs_complete} complete
condlist_1 = {+gar_flea_market_fixer_dead} fail
target_story_ids = logic@work2, gar_smart_terrain_6_3
auto_name = false
auto_faction = true

; Вернуть свои вещи
[gar_quest_redemption]
type = storyline
task_type = additional
prior = 12
icon = ui_mt_image_attack_tower
;spot = mar_defend_tower_location
target_cond = true
name = gar_quest_redemption_name
text = gar_quest_redemption_text
condlist_0 = {+gar_quest_redemption_done} complete
target_story_ids = 727
auto_name = false

; Взять старый КПК в лагере Свежака
[gar_quest_get_old_pda]
type = storyline
task_type = additional
prior = 10
icon = ui_mt_image_attack_tower
;spot = mar_defend_tower_location
target_cond = true
name = gar_quest_get_old_pda_name
text = gar_quest_get_old_pda_text
condlist_0 = {+gar_quest_get_old_pda_box_started} reversed
condlist_1 = {+gar_flea_market_stop_quest_line} reversed
target_story_ids = 702
auto_name = false
auto_faction = true

; Взять старый КПК в ящике с инструментами
[gar_quest_get_old_pda_box]
type = storyline
task_type = additional
prior = 10
icon = ui_mt_image_attack_tower
;spot = mar_defend_tower_location
target_cond = true
name = gar_quest_get_old_pda_box_name
text = gar_quest_get_old_pda_box_text
condlist_0 = {+gar_quest_bring_old_pda_started} complete
condlist_1 = {+gar_flea_market_stop_quest_line} reversed
target_story_ids = 715
auto_name = false
auto_faction = true

; Принести Напру старый КПК
[gar_quest_bring_old_pda]
type = storyline
task_type = additional
prior = 10
icon = ui_mt_image_attack_tower
;spot = mar_defend_tower_location
target_cond = true
name = gar_quest_bring_old_pda_name
text = gar_quest_bring_old_pda_text
condlist_0 = {+gar_quest_bring_old_pda_done} complete
condlist_1 = {+gar_flea_market_stop_quest_line} reversed
target_story_ids = logic@work5, gar_smart_terrain_6_3
auto_name = false
auto_faction = true
community_relation_delta_complete = 50

; Принести Напру две тысячи
[gar_quest_bring_money]
type = storyline
task_type = additional
prior = 10
icon = ui_mt_image_attack_tower
;spot = mar_defend_tower_location
target_cond = true
name = gar_quest_bring_money_name
text = gar_quest_bring_money_text
condlist_0 = {+gar_quest_bring_money_done} complete
condlist_1 = {+gar_flea_market_stop_quest_line} reversed
target_story_ids = logic@work5, gar_smart_terrain_6_3
auto_name = false
auto_faction = true
community_relation_delta_complete = 50

; Принести Авоське две тысячи
[gar_quest_get_weapons]
type = storyline
task_type = additional
prior = 10
icon = ui_mt_image_attack_tower
;spot = mar_defend_tower_location
target_cond = true
name = gar_quest_get_weapons_name
text = gar_quest_get_weapons_text
condlist_0 = {+gar_quest_get_weapons_arrived} reversed
condlist_1 = {+gar_flea_market_stop_quest_line} reversed
target_story_ids = 709
auto_name = false
auto_faction = true

; Убить предателя
[gar_quest_destroy_ambush]
type = storyline
task_type = additional
prior = 10
icon = ui_mt_image_attack_tower
;spot = mar_defend_tower_location
target_cond = true
name = gar_quest_destroy_ambush_name
text = gar_quest_destroy_ambush_text
condlist_0 = {+gar_quest_get_weapons_destroyed_ambush} complete
condlist_1 = {+gar_flea_market_stop_quest_line} reversed
target_story_ids = 709
auto_name = false
auto_faction = true
community_relation_delta_complete = 100

; Забрать вещи с трупа Авоськи
[gar_quest_get_traitor_pda]
type = storyline
task_type = additional
prior = 10
icon = ui_mt_image_attack_tower
;spot = mar_defend_tower_location
target_cond = true
name = gar_quest_get_traitor_pda_name
text = gar_quest_get_traitor_pda_text
condlist_0 = {+gar_quest_get_weapons_got_traitor_pda} complete
condlist_1 = {+gar_flea_market_stop_quest_line} reversed
target_story_ids = 709
auto_name = false
auto_faction = true

; Поговорить с Диким Напром
[gar_quest_speak_with_quester]
type = storyline
task_type = additional
prior = 10
icon = ui_mt_image_attack_tower
;spot = mar_defend_tower_location
target_cond = true
name = gar_quest_speak_with_quester_name
text = gar_quest_speak_with_quester_text
condlist_0 = {+gar_quest_liberate_conc_camp_told} complete
condlist_1 = {+gar_flea_market_stop_quest_line} reversed
condlist_2 = {+gar_quest_liberate_conc_camp_done +gar_quest_speak_with_quester_done} reversed
target_story_ids = logic@work5, gar_smart_terrain_6_3
auto_name = false
auto_faction = true

; Встретиться с группой диггеров
[gar_quest_meet_with_digger_fighters]
type = storyline
task_type = additional
prior = 10
icon = ui_mt_image_attack_tower
;spot = mar_defend_tower_location
target_cond = true
name = gar_quest_meet_with_digger_fighters_name
text = gar_quest_meet_with_digger_fighters_text
condlist_0 = {+gar_quest_meet_with_digger_fighters_done} complete
condlist_1 = {+gar_flea_market_stop_quest_line} reversed
target_story_ids = 710
auto_name = false
auto_faction = true

; Уничтожить охранников концлагеря бандитов
[gar_quest_liberate_conc_camp]
type = storyline
task_type = additional
prior = 10
icon = ui_mt_image_attack_tower
;spot = mar_defend_tower_location
target_cond = true
name = gar_quest_liberate_conc_camp_name
text = gar_quest_liberate_conc_camp_text
condlist_0 = {+gar_quest_liberate_conc_camp_done} complete
condlist_1 = {+gar_flea_market_stop_quest_line} reversed
target_story_ids = 711
auto_name = false
auto_faction = true
community_relation_delta_complete = 150

; Забрать добычу из тайника
[gar_quest_captive_reward]
type = storyline
task_type = additional
prior = 10
icon = ui_mt_image_attack_tower
;spot = mar_defend_tower_location
target_cond = true
name = gar_quest_captive_reward_name
text = gar_quest_captive_reward_text
condlist_0 = {+gar_quest_captive_reward_done} complete
target_story_ids = 717
auto_name = false
auto_faction = true

;-----------------------------------------------------

; Убрать человека по кличке Авоська
[gar_quest_kill_digger_traitor]
type = storyline
task_type = additional
prior = 10
icon = ui_mt_image_attack_tower
target_cond = true
name = gar_quest_kill_digger_traitor_name
text = gar_quest_kill_digger_traitor_text
condlist_0 = {+gar_quest_kill_digger_traitor_done} complete, {+gar_quest_kill_digger_traitor_gone} reversed
condlist_1 = {+gar_bandit_leader_dead} reversed
target_story_ids = logic@work1, gar_smart_terrain_4_5
auto_name = false
reward_money = 1000
auto_faction = true
community_relation_delta_complete = 50

; Убрать Контрабандиста и диггеров
[gar_quest_kill_smuggler]
type = eliminate_smart
task_type = additional
prior = 10
icon = ui_mt_image_attack_tower
target_cond = {+gar_quest_kill_smuggler_told -gar_quest_kill_smuggler_done =target_smart_name(gar_smart_terrain_4_2)} true
name = gar_quest_kill_smuggler_name
text = gar_quest_kill_smuggler_text
on_complete = %+gar_quest_kill_smuggler_done%
on_reversed = %+gar_quest_kill_smuggler_done%
target_story_ids = 709
auto_name = false
play_regard = nil
reward_money = 2000
auto_faction = true
community_relation_delta_complete = 100

; Занять Барахолку вместе с бандитами
[gar_quest_destroy_flea_market]
type = capture_smart
task_type = additional
prior = 10
icon = ui_mt_image_attack_tower
target_cond = {+gar_quest_destroy_flea_market_told -gar_quest_destroy_flea_market_done =target_smart_name(gar_smart_terrain_6_3)} true
name = gar_quest_destroy_flea_market_name
text = gar_quest_destroy_flea_market_text
on_complete = %+gar_quest_destroy_flea_market_done%
on_reversed = %+gar_quest_destroy_flea_market_done%
auto_name = false
play_regard = nil
counter_attack = false
auto_faction = true
community_relation_delta_complete = 150

; Забрать награду у Зуба
[gar_quest_bandit_reward]
type = storyline
task_type = additional
prior = 10
icon = ui_mt_image_attack_tower
target_cond = true
name = gar_quest_bandit_reward_name
text = gar_quest_bandit_reward_text
condlist_0 = {+gar_quest_bandit_reward_done} complete
condlist_1 = {+gar_bandit_barman_dead} reversed
target_story_ids = 725
auto_name = false
auto_faction = true

; Потребовать увеличить награду у Йоги
[gar_quest_more_reward]
type = storyline
task_type = additional
prior = 10
icon = ui_mt_image_attack_tower
target_cond = true
name = gar_quest_more_reward_name
text = gar_quest_more_reward_text
condlist_0 = {+gar_quest_bandit_secret_started} complete
condlist_1 = {+gar_bandit_leader_dead} reversed
target_story_ids = 724
auto_name = false
auto_faction = true

; Забрать ствол из тайника в аномалии
[gar_quest_bandit_secret]
type = storyline
task_type = additional
prior = 10
icon = ui_mt_image_attack_tower
target_cond = true
name = gar_quest_bandit_secret_name
text = gar_quest_bandit_secret_text
condlist_0 = {+gar_quest_bandit_secret_done} complete
target_story_ids = 717
auto_name = false
auto_faction = true


;Recover Items

[gar_recover_item_1]   ;Вернуть «Чейзер-13»
type = recover_item
task_type = additional
name = gar_recover_item_1_name
text = gar_recover_item_1_text
target_npc_or_box_name = gar_recover_item_1_corpse
distanse = 100
prior = 2
faction = bandit
target_cond = {=actor_on_level(garbage) -gar_recover_item_1_done} true, false
on_init = %+gar_recover_item_1_done%
requested_items = gar_quest_wpn_wincheaster1300
community_relation_delta_fail=-50
community_relation_delta_complete =+50
reward_money = 500
auto_faction = true
immediate_reward = true

[gar_recover_item_2]   ;Найти модифицированное оружие
type = recover_item
task_type = additional
name = gar_recover_item_2_name
text = gar_recover_item_2_text
target_npc_or_box_name = gar_recover_item_2_corpse
distanse = 100
prior = 2
faction = bandit
target_cond = {=actor_on_level(garbage) -gar_recover_item_2_done} true, false
on_init = %+gar_recover_item_2_done%
requested_items = gar_quest_wpn_desert_eagle
community_relation_delta_fail=-50
community_relation_delta_complete =+50
reward_money = 1500
auto_faction = true
immediate_reward = true

[gar_recover_item_3]   ;Принести бутылку водки «Казаки 2»
type = recover_item
task_type = additional
name = gar_recover_item_3_name
text = gar_recover_item_3_text
target_npc_or_box_name = gar_recover_item_3_corpse
distanse = 100
prior = 2
faction = bandit
target_cond = {=actor_on_level(garbage) -gar_recover_item_3_done} true, false
on_init = %+gar_recover_item_3_done%
requested_items = gar_quest_vodka_2
community_relation_delta_fail=-50
community_relation_delta_complete =+50
reward_money = 200
auto_faction = true
immediate_reward = true

[gar_recover_item_4]   ;Вернуть куртку новичка
type = recover_item
task_type = additional
name = gar_recover_item_4_name
text = gar_recover_item_4_text
target_npc_or_box_name = gar_recover_item_4_corpse
distanse = 100
prior = 2
faction = stalker
target_cond = {=actor_on_level(garbage) -gar_recover_item_4_done} true, false
on_init = %+gar_recover_item_4_done%
requested_items = gar_quest_novice_outfit
community_relation_delta_fail=-50
community_relation_delta_complete =+50
reward_money = 750
auto_faction = true
immediate_reward = true

[gar_recover_item_5]   ;Принести именной пистолет
type = recover_item
task_type = additional
name = gar_recover_item_5_name
text = gar_recover_item_5_text
target_npc_or_box_name = gar_recover_item_5_corpse
distanse = 100
prior = 2
faction = stalker
target_cond = {=actor_on_level(garbage) -gar_recover_item_5_done} true, false
on_init = %+gar_recover_item_5_done%
requested_items = gar_quest_wpn_pm
community_relation_delta_fail=-50
community_relation_delta_complete =+50
reward_money = 750
auto_faction = true
immediate_reward = true

;Bring Items

[gar_bring_item_1]
auto_name = false
type = bring_item
task_type = additional
name = gar_bring_item_1_name
text = gar_bring_item_1_text
target_cond = {~20} true
prior = 2
faction = bandit
requested_items = grenade_rgd5,grenade_rgd5,grenade_rgd5
community_relation_delta_fail=-50
community_relation_delta_complete =+50
reward_money = {~50} 1000, {~50} 1500, 500
auto_faction = true
immediate_reward = true

[gar_bring_item_2]
auto_name = false
type = bring_item
task_type = additional
name = gar_bring_item_2_name
text = gar_bring_item_2_text
target_cond = {~20} true
prior = 2
faction = bandit
requested_items = medkit,medkit,medkit
community_relation_delta_fail=-50
community_relation_delta_complete =+50
reward_money = {~50} 1000, {~50} 1500, 500
auto_faction = true
immediate_reward = true

[gar_bring_item_3]
auto_name = false
type = bring_item
task_type = additional
name = gar_bring_item_3_name
text = gar_bring_item_3_text
target_cond = {~20} true
prior = 2
faction = bandit
requested_items = ammo_12x70_buck,ammo_12x70_buck,ammo_12x70_buck
community_relation_delta_fail=-50
community_relation_delta_complete =+50
reward_money = {~50} 1000, {~50} 1500, 500
auto_faction = true
immediate_reward = true

[gar_bring_item_4]
auto_name = false
type = bring_item
task_type = additional
name = gar_bring_item_4_name
text = gar_bring_item_4_text
target_cond = {~20} true
prior = 2
faction = bandit
requested_items = ammo_9x18_fmj,ammo_9x18_fmj,ammo_9x18_fmj
community_relation_delta_fail=-50
community_relation_delta_complete =+50
reward_money = {~50} 1000, {~50} 1500, 500
auto_faction = true
immediate_reward = true

[gar_bring_item_5]
auto_name = false
type = bring_item
task_type = additional
name = gar_bring_item_5_name
text = gar_bring_item_5_text
target_cond = {~20} true
prior = 2
faction = bandit
requested_items = ammo_5.45x39_fmj,ammo_5.45x39_fmj,ammo_5.45x39_fmj
community_relation_delta_fail=-50
community_relation_delta_complete =+50
reward_money = {~50} 1000, {~50} 1500, 500
auto_faction = true
immediate_reward = true

[gar_bring_item_6]
auto_name = false
type = bring_item
task_type = additional
name = gar_bring_item_6_name
text = gar_bring_item_6_text
target_cond = {~20} true
prior = 2
faction = bandit
requested_items = vodka,vodka,vodka,vodka,vodka
community_relation_delta_fail=-50
community_relation_delta_complete =+50
reward_money = {~50} 1000, {~50} 1500, 500
auto_faction = true
immediate_reward = true