[logic]
active = sr_idle@random
on_hit = hit

[sr_idle@random]
on_info = {+mil_freedom_megafon_hit} nil
on_info2 = {+red_bridge_finished} sr_idle@end_random_idle
on_info3 = {=dist_to_actor_le(350) -mil_freedom_megafon_hit !is_smart_in_combat(mil_smart_terrain_7_7) =smart_captured_by_faction(mil_smart_terrain_7_7:army)} sr_idle@pause %=play_sound(esc_comandir_megafon)%

[sr_idle@end_random_idle]
on_info = {+mil_freedom_megafon_hit} nil
on_game_timer = 150 | {=is_day =is_surge_complete} sr_idle@end_random %=play_sound(val_freedom_megafon)%

[sr_idle@end_random]
on_info = {+mil_freedom_megafon_hit} nil
on_signal = sound_end | sr_idle@pause

[sr_idle@pause]
on_info = {+mil_freedom_megafon_hit} nil
on_timer = 45000 | sr_idle@random

[hit]
on_info = %+mil_freedom_megafon_hit =stop_sound%