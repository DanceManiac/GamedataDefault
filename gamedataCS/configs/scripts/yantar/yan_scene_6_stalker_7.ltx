[logic@stalker7]
active = walker@snork_appear
suitable = {-yan_stop_spawn_cut6} true
post_combat_time = 0,0

[walker@snork_appear]
path_walk = stalker7_cut5_walk
path_look = stalker7_cut5_look 
wounded = wounded
invulnerable = true
meet = no_meet
combat_ignore_cond = {-yan_space_restrictor_actor_ready_cut5} true, {+yan_scene_6_snork_dead} true
on_info = {+yan_scene_6_snork_dead} camper@wait_cut5
danger = danger_ignore

[danger_ignore]
ignore_distance = 0
ignore_types = sound

;--сцена 5 "Прорыв к Установке"

[camper@wait_cut5]
path_walk = stalker7_cut5_walk
path_look = stalker7_cut5_look
wounded = wounded
radius = 0
combat_ignore_cond = always
meet = no_meet
invulnerable = true
on_info = {+yan_proriv_k_ystanovke} walker@prepare_to_zabor
danger = danger_ignore

[walker@prepare_to_zabor]
path_walk = stalker_3_prepare_walk
path_look = levsha_prepare_look
meet = no_meet
combat_ignore_cond = true
team = prepare_to_zabor
def_state_moving = assault
on_info = {+yan_scene_6_ready_to_zabor} remark@prepare_to_zabor_wait
danger = danger_ignore

[remark@prepare_to_zabor_wait]
anim = wait_na
meet = no_meet
target = yan_smart_terrain_for_squad_levsha_levsha_prepare_walk, 0
def_state_moving = assault
combat_ignore_cond = true
on_timer = 5000 | {-yan_zabor_1_already_jumping} camper@to_zabor %+yan_zabor_1_already_jumping%
danger = danger_ignore

[camper@to_zabor]
path_walk = zabor_walk
path_look = zabor_look
def_state_moving = assault
meet = no_meet
combat_ignore_cond = true
on_signal = ready_to_jump | remark@zabor %-yan_zabor_1_already_jumping%
danger = danger_ignore

[remark@zabor]
anim = yan_zabor_0
meet = no_meet
invulnerable = true
combat_ignore_cond = true
combat_ignore_keep_when_attacked = true
on_signal = anim_end | camper@fire1_cut5

[camper@timer_fire1_cut5]
path_walk = stalker7_cut5_walk
path_look = stalker7_cut5_look
combat_ignore_cond = {=fighting_dist_ge(15)} 
wounded = wounded
invulnerable = true
radius = 0
;danger = danger_condition@2
combat_ignore_cond = always
meet = no_meet
on_game_timer = 80 | camper@fire1_cut5

[camper@fire1_cut5]
invulnerable = true
combat_ignore_cond = {=fighting_dist_ge(15)} 
path_walk = stalker7_cut5_2_walk
path_look = stalker7_cut5_2_look 
def_state_moving = assault
radius = 0
meet = no_meet
on_info = {+yan_destroy_zombi20_cut5 +yan_destroy_zombi21_cut5 +yan_space_restrictor_actor_go_cut5} camper@fire2_cut5

[camper@fire2_cut5]
invulnerable = true
combat_ignore_cond = {=fighting_dist_ge(15)} 
path_walk = stalker7_cut5_3_walk
path_look = stalker7_cut5_3_look
def_state_moving = assault
radius = 0
meet = no_meet
on_info = {+yan_destroy_zombi22_cut5 +yan_destroy_zombi23_cut5 +yan_destroy_zombi24_cut5} camper@fire3_cut5

[camper@fire3_cut5]
combat_ignore_cond = {=fighting_dist_ge(15)} 
path_walk = stalker7_cut5_4_walk
path_look = stalker7_cut5_4_look
def_state_moving = assault
radius = 0
meet = no_meet
on_info = {+yan_destroy_zombi27_cut5} camper@fire4_cut5

[camper@fire4_cut5]
invulnerable = true
combat_ignore_cond = {=fighting_dist_ge(15)} 
path_walk = stalker7_cut5_5_walk
path_look = stalker7_cut5_5_look
def_state_moving = assault
radius = 0
meet = no_meet
on_info = {+yan_destroy_zombi30_cut5} camper@fire5_cut5

[camper@fire5_cut5]
invulnerable = true
combat_ignore_cond = {=fighting_dist_ge(15)} 
path_walk = stalker7_cut5_6_walk
path_look = stalker7_cut5_6_look
def_state_moving = assault
radius = 0
meet = no_meet
on_signal = on_position | %+yan_zabor_stalker_7_on_position%
on_info = {+typoi +yan_levsha_ready_cut6} remark@1

[remark@1]
on_timer = 13000 | {-yan_zabor_2_already_jumping} camper@to_zabor_2 %+yan_zabor_2_already_jumping%
invulnerable = true
combat_ignore_cond = true
target = yan_smart_terrain_for_squad_levsha_stalker5_cut5_7_walk,0
combat_ignore_keep_when_attacked = true
anim = wait_na

[camper@to_zabor_2]
path_walk = zabor_3_walk
path_look = zabor_3_look
def_state_moving = assault
meet = no_meet
combat_ignore_cond = always
on_signal = ready_to_jump | remark@zabor_2 %-yan_zabor_2_already_jumping%
invulnerable = true

[remark@zabor_2]
anim = yan_zabor_2
meet = no_meet
invulnerable = true
combat_ignore_cond = true
combat_ignore_keep_when_attacked = true
on_signal = anim_end | camper@wait_cut6



;-- сцена 6 "Ремонт Установки"

[camper@wait_cut6]
danger = danger_condition
combat_ignore_cond = always
invulnerable = true
radius = 0
no_retreat = true
meet = no_meet
path_walk = yan_camp_7_walk
path_look = yan_camp_7_look
on_game_timer = 80 | {+yan_actor_start_to_go} camper@go

[camper@go]
path_walk = yan_vikl_7_walk
path_look = yan_vikl_7_look
def_state_moving = assault
radius = 0
danger = danger_condition
combat_ignore_cond = always
on_game_timer = 130 | %+yan_not_go_to_roof% camper@go1_1
def_state_campering = hide_na 
meet = no_meet

[camper@go1_1]
path_walk = yan_vikl_7_walk
path_look = yan_vikl_7_look
combat_ignore_cond = always
radius = 0
danger = danger_condition
on_game_timer = 250 | camper@go1
on_info = {+yan_hero_in_zone} camper@go1
def_state_campering = hide_na 
meet = no_meet

[camper@go1]
path_walk = yan_vikl_7a_walk
path_look = yan_vikl_7a_look
def_state_moving = assault
combat_ignore_cond = always
danger = danger_condition
radius = 0
on_game_timer = 250 | camper@go2
combat_ignore_cond = always
meet = no_meet

[camper@go2]
out_restr = yan_space_restrictor_cut6_for_group1_a
path_walk = yan_vikl_7a_walk
path_look = yan_vikl_7a_look
def_state_moving = assault
radius = 5
combat_ignore_cond = {!enemy_in_zone(yan_roof_cut6_restr) !enemy_in_zone(yan_space_restrictor_cut6_for_group1)}
meet = no_meet
on_info = {+yan_naprnik_roof_5}  %=play_sound(yan_naprnik_roof_5:stalker)% camper@go2_1

[camper@go2_1]
out_restr = yan_space_restrictor_cut6_for_group1_a
path_walk = yan_vikl_7a_walk
path_look = yan_vikl_7a_look
def_state_moving = assault
radius = 5
combat_ignore_cond = {!enemy_in_zone(yan_roof_cut6_restr) !enemy_in_zone(yan_space_restrictor_cut6_for_group1)}
meet = no_meet
on_info = {+yan_naprnik_roof5}  %=play_sound(yan_naprnik_roof5:stalker)% camper@go2_2
on_info2 = {+yan_wave_naval_roof1}  camper@angar

[camper@go2_2]
out_restr = yan_space_restrictor_cut6_for_group1_a
path_walk = yan_vikl_7a_walk
path_look = yan_vikl_7a_look
def_state_moving = assault
radius = 5
combat_ignore_cond = {!enemy_in_zone(yan_roof_cut6_restr) !enemy_in_zone(yan_space_restrictor_cut6_for_group1)}
meet = no_meet
on_info = {+yan_naprnik_roof1}  %=play_sound(yan_naprnik_roof1:stalker)% camper@go2_3
on_info2 = {+yan_wave_naval_roof1}  camper@angar

[camper@go2_3]
out_restr = yan_space_restrictor_cut6_for_group1_a
path_walk = yan_vikl_7a_walk
path_look = yan_vikl_7a_look
def_state_moving = assault
radius = 5
combat_ignore_cond = {!enemy_in_zone(yan_roof_cut6_restr) !enemy_in_zone(yan_space_restrictor_cut6_for_group1)}
meet = no_meet
on_info = {+yan_wave_naval_roof1} camper@angar


[camper@angar]
out_restr = yan_space_restrictor_cut6_for_group1_a
path_walk = yan_vikl_7a_a_walk
path_look = yan_vikl_7a_a_look
def_state_moving = assault
radius = 5
combat_ignore_cond = {!enemy_in_zone(yan_space_restrictor_cut6_for_group1) !enemy_in_zone(yan_roof_cut6_restr)}
meet = no_meet


[wounded]
hp_state        = 0|wounded_heavy@help_heavy
hp_state_see    = 0|wounded_heavy@help_heavy
hp_victim       = 0|nil
hp_fight        = 0|false
hp_cover        = 0|false