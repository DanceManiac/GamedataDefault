[logic]
active = ph_door@locked

[ph_door@locked]
locked = true
closed = true
snd_open_start = trader_door_open_start
snd_close_start = trader_door_close_start
snd_close_stop = trader_door_close_stop
on_info = {+agru_go_out_end_task_complete +yan_actor_away_door1 -yan_alarm_signal_stalkers_cut2 -yan_quest_levsha} ph_door@unlocked, {+agru_go_out_end_task_complete +yan_actor_away_door1 -yan_alarm_signal_stalkers_cut2 +yan_quest_levsha +yan_quest_levsha_prepared -yan_professor_about_switcher_sound_info -yan_levsha_reply_switcher_sound_info} ph_door@unlocked, {=actor_in_zone(yan_space_restrictor_no_weapon_actor_base_cut2) +yan_actor_away_door1 +yan_alarm_signal_stalkers_cut2 +agru_go_out_end_task_complete} ph_door@unlocked, {+agru_go_out_end_task_complete +yan_actor_away_door1 -yan_alarm_signal_stalkers_cut2 +yan_levsha_reply_switcher_sound_info} ph_door@unlocked
;on_info2 = {=surge_npc_near_door !is_smart_in_combat(yan_smart_terrain_6_4)} ph_door@force_open
on_info2 = {=surge_npc_near_door =is_surge_started} ph_door@force_open

[ph_door@unlocked]
locked = true
closed = false
snd_open_start = trader_door_open_start
snd_close_start = trader_door_close_start
snd_close_stop = trader_door_close_stop
on_info = {-yan_actor_away_door1} ph_door@locked, {+yan_quest_levsha -yan_quest_levsha_prepared} ph_door@locked, {+yan_professor_about_switcher_sound_info -yan_levsha_reply_switcher_sound_info} ph_door@locked 
;on_info2 = {=surge_npc_near_door !is_smart_in_combat(yan_smart_terrain_6_4)} ph_door@force_open
on_info2 = {=surge_npc_near_door =is_surge_started} ph_door@force_open

[ph_door@force_open]
locked = true
closed = false
snd_open_start = trader_door_open_start
snd_close_start = trader_door_close_start
snd_close_stop = trader_door_close_stop
on_info = {!surge_npc_near_door} ph_door@locked