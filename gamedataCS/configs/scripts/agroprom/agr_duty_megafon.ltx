[logic]
active = sr_idle@prefirst
on_hit = hit

[sr_idle@prefirst]
on_info = {+agr_duty_megafon_hit} nil
on_info2 = {+agr_duty_megafon_start} sr_idle@first

[sr_idle@first]
on_info = {+agr_duty_megafon_hit} nil                                    
on_info2 = {=is_day =is_surge_complete !is_surge_started !is_smart_in_combat(agr_smart_terrain_1_6) !is_smart_in_combat(agr_smart_terrain_1_6_near_2) =smart_captured_by_faction(agr_smart_terrain_1_6:dolg) =smart_captured_by_faction(agr_smart_terrain_1_6_near_2:dolg)} sr_idle@wait %=play_sound(agr_base_dolg_megafon_0)%

[sr_idle@wait]
on_info = {+agr_duty_megafon_hit} nil                                           
on_signal = sound_end | sr_idle@pause

[sr_idle@pause]
on_info = {+agr_duty_megafon_hit} nil
on_timer = 65000 | sr_idle@first

[hit]
on_info = %+agr_duty_megafon_hit =stop_sound%


