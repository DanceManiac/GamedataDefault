[logic]
active = sr_idle@alarm

[sr_idle@alarm]
on_info = {+esc_dead_megafon} nil %=stop_sound -esc_alarm%
on_info2 = {!smart_captured_by_faction(esc_smart_terrain_3_16:army)} sr_idle@wait %=stop_sound%
on_info3 = {-esc_silence =dist_to_actor_le(150) =is_smart_in_combat(esc_smart_terrain_3_16)} sr_idle@wait %=play_sound(megafon_alarm)%
on_info4 = {-esc_silence -esc_alarm =dist_to_actor_le(350) =is_day -start_surge_info =smart_captured_by_faction(esc_smart_terrain_3_16:army)} sr_idle@wait %=play_sound(megafon)%
on_info5 = {+start_surge_info -surge_finished_info} sr_idle@wait %=play_sound(blowout_alarm)%

[sr_idle@wait]
on_info = {+esc_dead_megafon} nil %=stop_sound -esc_alarm%
on_game_timer = 20 | sr_idle@alarm %-esc_alarm%