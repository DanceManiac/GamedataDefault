[logic@work1]
active = walker@start_work1
suitable = {=check_npc_name(val_freedom_blockpost_guard_north_1)}

[walker@start_work1]
path_walk = blockpost_guard_walker_1_walk
path_look = blockpost_guard_walker_1_look
out_restr = val_smart_terrain_5_7_defence
def_state_moving1 = assault
def_state_moving2 = assault
def_state_moving3 = assault
meet = no_meet
on_info = {+val_talked_to_blockpost_leader_complete +gar_story_got_info_from_digger -val_reply_to_sos_done} walker@start_work1_1
on_info2 = {+val_freedom_blockpost_reply_sos_done_info} walker@start_work1_3

[walker@start_work1_1]
path_walk = blockpost_guard_walker_1_walk
path_look = blockpost_guard_walker_1_look
out_restr = val_smart_terrain_5_7_defence
def_state_moving1 = assault
def_state_moving2 = assault
def_state_moving3 = assault
meet = no_meet
on_info = {+val_play_sound_gunfire_1_start} walker@start_work1_2

[walker@start_work1_2]
path_walk = blockpost_guard_walker_1_walk
path_look = blockpost_guard_walker_3_look
out_restr = val_smart_terrain_5_7_defence
def_state_moving1 = patrol
def_state_moving2 = patrol
def_state_moving3 = patrol
meet = no_meet
on_game_timer = 200 | walker@start_work1_3

[walker@start_work1_3]
path_walk = blockpost_guard_walker_1_walk
path_look = blockpost_guard_walker_1_look
out_restr = val_smart_terrain_5_7_defence
def_state_moving1 = patrol
def_state_moving2 = patrol
def_state_moving3 = patrol
meet = meet

;-----------------------------

[logic@work2]
active = walker@start_work2
suitable = {=check_npc_name(val_freedom_blockpost_guard_north_2)}

[walker@start_work2]
path_walk = blockpost_guard_walker_2_walk
path_look = blockpost_guard_walker_2_look
out_restr = val_smart_terrain_5_7_defence
def_state_moving1 = assault
def_state_moving2 = assault
def_state_moving3 = assault
meet = no_meet
on_info = {+val_talked_to_blockpost_leader_complete +gar_story_got_info_from_digger -val_reply_to_sos_done} walker@start_work2_1
on_info2 = {+val_freedom_blockpost_reply_sos_done_info} walker@start_work2_3

[walker@start_work2_1]
path_walk = blockpost_guard_walker_2_walk
path_look = blockpost_guard_walker_2_look
out_restr = val_smart_terrain_5_7_defence
def_state_moving1 = assault
def_state_moving2 = assault
def_state_moving3 = assault
meet = no_meet
on_info = {+val_play_sound_gunfire_1_start} walker@start_work2_2

[walker@start_work2_2]
path_walk = blockpost_guard_walker_2_walk
path_look = blockpost_guard_walker_4_look
out_restr = val_smart_terrain_5_7_defence
def_state_moving1 = patrol
def_state_moving2 = patrol
def_state_moving3 = patrol
meet = no_meet
on_game_timer = 200 | walker@start_work2_3

[walker@start_work2_3]
path_walk = blockpost_guard_walker_2_walk
path_look = blockpost_guard_walker_2_look
out_restr = val_smart_terrain_5_7_defence
def_state_moving1 = patrol
def_state_moving2 = patrol
def_state_moving3 = patrol
meet = meet

;-----------------------------

[logic@work3]
active = walker@start_work3
suitable = {=check_npc_name(val_freedom_blockpost_guard_leader_north)}
on_death = death@work3

[walker@start_work3]
path_walk = blockpost_leader_walker_1_walk
path_look = blockpost_leader_walker_1_look
out_restr = val_smart_terrain_5_7_defence
def_state_moving1 = assault
def_state_moving2 = assault
def_state_moving3 = assault
meet = no_meet
on_info = {+val_play_sound_gunfire_1_start -val_come_to_freedom_base_done -val_reply_to_sos_done} remark %=create_item_in_inv(hand_radio:val_freedom_blockpost_guard_leader_north)%
on_info2 = {+val_freedom_blockpost_reply_sos_done_info} walker@start_work3_5

[remark]
anim = guard_rac
target = actor
on_game_timer = 20 | remark@1 %=play_sound(val_freedom_blockpost_reply_sos_1:freedom:val_smart_terrain_5_7)%
meet = no_meet

[remark@1]
anim = guard_rac
target = actor
on_signal = sound_end | walker@start_work3_2 %+val_freedom_blockpost_reply_sos_1_info%
meet = no_meet

[walker@start_work3_2]
path_walk = blockpost_leader_walker_1_walk
path_look = blockpost_leader_walker_1_look
out_restr = val_smart_terrain_5_7_defence
def_state_moving1 = patrol
def_state_moving2 = patrol
def_state_moving3 = patrol
meet = no_meet
on_info = {+val_freedom_blockpost_reply_sos_1_info} remark@2 %=play_sound(val_freedom_blockpost_reply_sos:freedom:val_smart_terrain_5_7)%

[remark@2]
anim = guard
target = actor
on_signal = sound_end | walker@start_work3_3 %=give_inited_task(storyline:val_reply_to_sos:freedom) =enable_level_changer(1127)%
meet = no_meet

[walker@start_work3_3]
path_walk = blockpost_leader_walker_1_walk
path_look = blockpost_leader_walker_1_look
out_restr = val_smart_terrain_5_7_defence
def_state_moving1 = patrol
def_state_moving2 = patrol
def_state_moving3 = patrol
meet = no_meet
on_game_timer = 200 | walker@start_work3_4

[walker@start_work3_4]
path_walk = blockpost_leader_walker_1_walk
path_look = blockpost_leader_walker_1_look
out_restr = val_smart_terrain_5_7_defence
def_state_moving1 = patrol
def_state_moving2 = patrol
def_state_moving3 = patrol
meet = no_meet
on_info = {-val_come_to_deadblockpost_sound} remark@3 %=play_sound(val_freedom_blockpost_reply_sos_done:freedom:val_smart_terrain_5_7)%

[remark@3]
anim = guard
target = val_smart_terrain_5_7_blockpost_leader_walker_1_look,0
on_signal = sound_end | walker@start_work3_5 %+val_freedom_blockpost_reply_sos_done_info%
meet = no_meet

[walker@start_work3_5]
path_walk = blockpost_leader_walker_1_walk
path_look = blockpost_leader_walker_1_look
out_restr = val_smart_terrain_5_7_defence
def_state_moving1 = patrol
def_state_moving2 = patrol
def_state_moving3 = patrol
meet = meet

[meet]
meet_state            = 2| guard@nil
meet_state_wpn = 2|threat@meet_weapon_wait
victim                = 2| actor
victim_wpn = 2|actor
use                = true

[death@work3]
on_info = %+val_blockpost_leader_north_dead%